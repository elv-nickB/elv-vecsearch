<mxfile host="app.diagrams.net" modified="2024-02-09T18:14:52.685Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36" etag="Jud1DBnlnYpGDoQ2MQlG" version="23.1.2" type="device">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2074" dy="689" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" target="WIyWlLk6GJQsqaUBKTNV-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="search args + content_id" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="60" y="100" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-6" target="3C7YMWRWqmSD2L3dmHqa-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-6" value="Query Understanding" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="665" y="75" width="110" height="90" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-10" target="3C7YMWRWqmSD2L3dmHqa-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-10" value="Embedder" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="250" y="80" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-2" target="WIyWlLk6GJQsqaUBKTNV-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-2" value="query (string)&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="430" y="90" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-7" target="3C7YMWRWqmSD2L3dmHqa-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-7" value="Query *" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="660" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-10" target="3C7YMWRWqmSD2L3dmHqa-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-10" value="Index" style="rhombus;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="680" y="310" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-13" target="3C7YMWRWqmSD2L3dmHqa-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-13" value="uids + query + stored vector data **" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="520" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-15" target="3C7YMWRWqmSD2L3dmHqa-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-15" value="Reranking***" style="rhombus;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="390" y="310" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-17" target="3C7YMWRWqmSD2L3dmHqa-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-17" value="sorted uids" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="270" y="330" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="3C7YMWRWqmSD2L3dmHqa-20" target="3C7YMWRWqmSD2L3dmHqa-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-20" value="Fabric Search" style="rhombus;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="150" y="305" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-22" value="Result" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="30" y="330" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-24" value="&lt;h1&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;* Query &amp;amp; Query Understanding&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;The output of the query understanding block should be a special &quot;query&quot; type. This might include field weights, a corrected query string, or any other information we would wish to provide to later steps.&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="450" width="280" height="150" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-25" value="&lt;h1&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;** Output of Index&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;The index takes just the embedding from the query and uses it to retrieve the corresponding candidate uids. It also provides stored vector data that can be used in the reranking step. It forwards the full query information from the previous step to the reranking.&amp;nbsp;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="390" y="450" width="260" height="160" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-27" value="&lt;h1&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;*** Reranking&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;It&#39;s less straightforward to decide what the input requirements for this step will be. It will likely require the embedding and vector data from the index in order to make an accurate calculation of document relevance. It may require additional information in the query which is provided by the query understanding step: for instance the field weights.&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="45" y="670" width="295" height="150" as="geometry" />
        </mxCell>
        <mxCell id="3C7YMWRWqmSD2L3dmHqa-28" value="&lt;h1&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Fabric Search + Final Result&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;The fabric search will take the uids provided by the re-ranking step and use these to retrieve the indexed document data and present the final results to the user in the same format they expect from calling the fabric search directly. In addition to the uids, we will forward any arguments passed in the user&#39;s query such as stats/select/display_fields to make sure these features are supported in our vector search apil.&amp;nbsp;&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="390" y="670" width="320" height="190" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
